{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/proprietaire/Desktop/Inst - React Minimalist GraphQL Dashboard/LTL Maps Admin/frontend/pages/shop/[slug].tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query getProductBySlug($slug: String!) {\\n    product(slug: $slug) {\\n      id\\n      name\\n      slug\\n      price\\n      thumbnail\\n      gallery {\\n        url\\n      }\\n      colors {\\n        id\\n        label\\n      }\\n      features\\n      description\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { FiCheck } from 'react-icons/fi';\nimport { toast } from 'react-toastify';\nimport Head from 'next/head';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/react-hooks';\nimport { useRouter } from 'next/router';\nimport { Button } from 'baseui/button';\nimport { Select } from 'baseui/select';\nimport { Input } from 'baseui/input';\nimport PageTitle from '../../components/UiElements/PageTitle/PageTitle';\nimport Container from '../../components/UiElements/Container/Container';\nimport Carousel, { Slide } from '../../components/UiElements/Carousel/Carousel';\nimport useDirection from '../../utils/useDirection';\nimport { withApollo } from '../../apollo/client';\nimport Wrapper, { MediaWrapper, Image, ContentWrapper, List, ListItem, ProductTitle, ProductPrice, ProductDescription } from '../../components/PageStyles/Product.styled';\nimport { useCartDispatch } from '../../contexts/cart/cart.provider';\nvar GET_PRODUCT = gql(_templateObject());\ntoast.configure();\n\nvar ProductSingle = function ProductSingle() {\n  var _useRouter = useRouter(),\n      slug = _useRouter.query.slug;\n\n  var _useQuery = useQuery(GET_PRODUCT, {\n    variables: {\n      slug: slug\n    },\n    notifyOnNetworkStatusChange: true\n  }),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      error = _useQuery.error;\n\n  var dispatch = useCartDispatch();\n\n  var _useState = useState([]),\n      color = _useState[0],\n      setColor = _useState[1];\n\n  var _useState2 = useState('1'),\n      quantity = _useState2[0],\n      setQuantity = _useState2[1];\n\n  var _useDirection = useDirection(),\n      _useDirection2 = _slicedToArray(_useDirection, 1),\n      direction = _useDirection2[0];\n\n  console.log(color, quantity, 'color');\n  if (!data) return null;\n  var _data$product = data.product,\n      id = _data$product.id,\n      name = _data$product.name,\n      description = _data$product.description,\n      price = _data$product.price,\n      thumbnail = _data$product.thumbnail,\n      colors = _data$product.colors,\n      gallery = _data$product.gallery,\n      features = _data$product.features;\n\n  function handleAddToCart() {\n    var item = {\n      id: id,\n      name: name,\n      thumbnail: thumbnail,\n      color: color.length !== 0 ? color[0].id : undefined,\n      quantity: quantity,\n      price: price\n    };\n    dispatch({\n      type: 'ADD_ITEM',\n      payload: item\n    });\n    toast('Added to the bag', {\n      progressClassName: 'fancy-progress-bar',\n      position: 'top-right',\n      autoClose: 2000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true\n    });\n  }\n\n  console.log(data, 'data');\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, __jsx(\"title\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, name, \" | INST.\"), __jsx(\"meta\", {\n    name: \"Description\",\n    content: description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  })), __jsx(PageTitle, {\n    title: name,\n    subtitle: \"Awesome GitHub T-shirts and other cool swag\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }), __jsx(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, __jsx(Wrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, __jsx(MediaWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, gallery && gallery.length !== 0 ? __jsx(Carousel, {\n    options: {\n      direction: direction\n    },\n    controls: false,\n    carouselSelector: \"productGallery\",\n    thumbs: gallery,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, gallery.map(function (item, index) {\n    return __jsx(Slide, {\n      key: \"gallery-key\".concat(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, __jsx(\"img\", {\n      src: item.url,\n      alt: \"Gallery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }));\n  })) : __jsx(Image, {\n    src: thumbnail,\n    alt: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  })), __jsx(ContentWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, __jsx(ProductTitle, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, name), __jsx(ProductPrice, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"$ \", price), __jsx(Input, {\n    value: quantity,\n    onChange: function onChange(e) {\n      return setQuantity(e.target.value);\n    },\n    type: \"number\",\n    overrides: {\n      Root: {\n        style: function style() {\n          return {\n            width: '100%',\n            marginBottom: '30px',\n            '@media only screen and (min-width: 376px)': {\n              maxWidth: '240px'\n            }\n          };\n        }\n      },\n      InputContainer: {\n        style: function style() {\n          return {\n            backgroundColor: 'transparent'\n          };\n        }\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }), colors && __jsx(Select, {\n    options: colors,\n    placeholder: \"Select color\",\n    value: color,\n    onChange: function onChange(params) {\n      return setColor(params.value);\n    },\n    overrides: {\n      Root: {\n        style: function style() {\n          return {\n            width: '100%',\n            '@media only screen and (min-width: 376px)': {\n              maxWidth: '240px'\n            }\n          };\n        }\n      },\n      ControlContainer: {\n        style: function style() {\n          return {\n            backgroundColor: 'transparent'\n          };\n        }\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }), features && __jsx(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, features.map(function (item, index) {\n    return __jsx(ListItem, {\n      key: \"\".concat(slug, \"_key \").concat(index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, __jsx(FiCheck, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }), \"\\xA0 \", item);\n  })), description && __jsx(ProductDescription, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, description), __jsx(Button, {\n    onClick: handleAddToCart,\n    overrides: {\n      BaseButton: {\n        style: function style(_ref) {\n          var $theme = _ref.$theme;\n          return _objectSpread({}, $theme.typography.font450, {\n            width: '100%',\n            '@media only screen and (min-width: 376px)': _objectSpread({\n              maxWidth: '240px'\n            }, $theme.typography.font250)\n          });\n        }\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, \"Add to cart\")))));\n};\n\nexport default withApollo(ProductSingle);","map":{"version":3,"sources":["/Users/proprietaire/Desktop/Inst - React Minimalist GraphQL Dashboard/LTL Maps Admin/frontend/pages/shop/[slug].tsx"],"names":["React","useState","FiCheck","toast","Head","gql","useQuery","useRouter","Button","Select","Input","PageTitle","Container","Carousel","Slide","useDirection","withApollo","Wrapper","MediaWrapper","Image","ContentWrapper","List","ListItem","ProductTitle","ProductPrice","ProductDescription","useCartDispatch","GET_PRODUCT","configure","ProductSingle","slug","query","variables","notifyOnNetworkStatusChange","data","loading","error","dispatch","color","setColor","quantity","setQuantity","direction","console","log","product","id","name","description","price","thumbnail","colors","gallery","features","handleAddToCart","item","length","undefined","type","payload","progressClassName","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","map","index","url","e","target","value","Root","style","width","marginBottom","maxWidth","InputContainer","backgroundColor","params","ControlContainer","BaseButton","$theme","typography","font450","font250"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { FiCheck } from 'react-icons/fi';\nimport { toast } from 'react-toastify';\nimport { NextPage } from 'next';\nimport Head from 'next/head';\nimport gql from 'graphql-tag';\nimport { useQuery } from '@apollo/react-hooks';\nimport { useRouter } from 'next/router';\nimport { Button } from 'baseui/button';\nimport { Select } from 'baseui/select';\nimport { Input } from 'baseui/input';\nimport PageTitle from '../../components/UiElements/PageTitle/PageTitle';\nimport Container from '../../components/UiElements/Container/Container';\nimport Carousel, { Slide } from '../../components/UiElements/Carousel/Carousel';\nimport useDirection from '../../utils/useDirection';\nimport { withApollo } from '../../apollo/client';\n\nimport Wrapper, {\n  MediaWrapper,\n  Image,\n  ContentWrapper,\n  List,\n  ListItem,\n  ProductTitle,\n  ProductPrice,\n  ProductDescription,\n} from '../../components/PageStyles/Product.styled';\nimport { useCartDispatch } from '../../contexts/cart/cart.provider';\n\nconst GET_PRODUCT = gql`\n  query getProductBySlug($slug: String!) {\n    product(slug: $slug) {\n      id\n      name\n      slug\n      price\n      thumbnail\n      gallery {\n        url\n      }\n      colors {\n        id\n        label\n      }\n      features\n      description\n    }\n  }\n`;\n\ntoast.configure();\n\nconst ProductSingle: NextPage<{}> = () => {\n  const {\n    query: { slug },\n  } = useRouter();\n\n  const { data, loading, error } = useQuery(GET_PRODUCT, {\n    variables: {\n      slug,\n    },\n    notifyOnNetworkStatusChange: true,\n  });\n\n  const dispatch = useCartDispatch();\n  const [color, setColor] = useState<any>([]);\n  const [quantity, setQuantity] = useState('1');\n  const [direction] = useDirection();\n  console.log(color, quantity, 'color');\n\n  if (!data) return null;\n  const {\n    id,\n    name,\n    description,\n    price,\n    thumbnail,\n    colors,\n    gallery,\n    features,\n  } = data.product;\n\n  function handleAddToCart() {\n    const item = {\n      id,\n      name,\n      thumbnail,\n      color: color.length !== 0 ? color[0].id : undefined,\n      quantity,\n      price,\n    };\n    dispatch({ type: 'ADD_ITEM', payload: item });\n    toast('Added to the bag', {\n      progressClassName: 'fancy-progress-bar',\n      position: 'top-right',\n      autoClose: 2000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n    });\n  }\n\n  console.log(data, 'data');\n\n  return (\n    <>\n      <Head>\n        <title>{name} | INST.</title>\n        <meta name=\"Description\" content={description} />\n      </Head>\n\n      <PageTitle\n        title={name}\n        subtitle=\"Awesome GitHub T-shirts and other cool swag\"\n      />\n\n      <Container>\n        <Wrapper>\n          <MediaWrapper>\n            {gallery && gallery.length !== 0 ? (\n              <Carousel\n                options={{ direction }}\n                controls={false}\n                carouselSelector=\"productGallery\"\n                thumbs={gallery}\n              >\n                {gallery.map((item: any, index: number) => (\n                  <Slide key={`gallery-key${index}`}>\n                    <img src={item.url} alt=\"Gallery\" />\n                  </Slide>\n                ))}\n              </Carousel>\n            ) : (\n              <Image src={thumbnail} alt={name} />\n            )}\n          </MediaWrapper>\n          <ContentWrapper>\n            <ProductTitle>{name}</ProductTitle>\n            <ProductPrice>$ {price}</ProductPrice>\n            <Input\n              value={quantity}\n              onChange={(e: any) => setQuantity(e.target.value)}\n              type=\"number\"\n              overrides={{\n                Root: {\n                  style: () => {\n                    return {\n                      width: '100%',\n                      marginBottom: '30px',\n                      '@media only screen and (min-width: 376px)': {\n                        maxWidth: '240px',\n                      },\n                    };\n                  },\n                },\n                InputContainer: {\n                  style: () => {\n                    return { backgroundColor: 'transparent' };\n                  },\n                },\n              }}\n            />\n            {colors && (\n              <Select\n                options={colors}\n                placeholder=\"Select color\"\n                value={color}\n                onChange={params => setColor(params.value)}\n                overrides={{\n                  Root: {\n                    style: () => {\n                      return {\n                        width: '100%',\n                        '@media only screen and (min-width: 376px)': {\n                          maxWidth: '240px',\n                        },\n                      };\n                    },\n                  },\n                  ControlContainer: {\n                    style: () => {\n                      return { backgroundColor: 'transparent' };\n                    },\n                  },\n                }}\n              />\n            )}\n            {features && (\n              <List>\n                {features.map((item: string, index: number) => (\n                  <ListItem key={`${slug}_key ${index}`}>\n                    <FiCheck />\n                    &nbsp; {item}\n                  </ListItem>\n                ))}\n              </List>\n            )}\n            {description && (\n              <ProductDescription>{description}</ProductDescription>\n            )}\n            <Button\n              onClick={handleAddToCart}\n              overrides={{\n                BaseButton: {\n                  style: ({ $theme }) => {\n                    return {\n                      ...$theme.typography.font450,\n                      width: '100%',\n                      '@media only screen and (min-width: 376px)': {\n                        maxWidth: '240px',\n                        ...$theme.typography.font250,\n                      },\n                    };\n                  },\n                },\n              }}\n            >\n              Add to cart\n            </Button>\n          </ContentWrapper>\n        </Wrapper>\n      </Container>\n    </>\n  );\n};\n\nexport default withApollo(ProductSingle);\n"]},"metadata":{},"sourceType":"module"}